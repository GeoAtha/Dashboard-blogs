<!DOCTYPE html>
<html lang="en">
<%- include('./partials/header') %>

<body>
  <%- include('./partials/nav') %>
  <div class="container">
    <h2 class="amber-text text-darken-2">Welcome to Dashboard</h2>
    <hr><br>
    <h4 class="">Posts</h4>

    <section class="row blogs">
      <% results.forEach(blog =>{ %>
        <div class="col s12 m6 l4">
          <div class="card blue-grey darken-1">
            <div class="card-content white-text">
              <span class="card-title"><%= blog.title %></span>
              <label>Snippet</label>
              <p><%= blog.snippet %></p>
            </div>
            <div class="card-action">
              <a class="del" href="" id="<%= blog.id %>"><i class="material-icons">delete</i>delete</a>
              <a class="put modal-trigger" href="#modal2" id="<%= blog.id %>"><i
                  class="material-icons">create</i>Update</a>
            </div>
          </div>
      </div>
      <% })%>
    </section>


    <section>
      <!-- Modal Trigger -->
      <a style="position:fixed; bottom:50px; right:100px;"
        class="btn-floating tooltipped btn-large waves-effect waves-light red modal-trigger" data-position="top"
        data-delay="50" data-tooltip="Add New Blog" href="#modal1"><i class="material-icons">add</i></a>

      <!-- Modal Create Structure -->
      <div id="modal1" class="modal">
        <div class="modal-content">
          <h4>Create New Blog</h4>
          <form action='/dashboard/post' method="POST" ectype="multipart/form-data">
            <label for="title" class="form-label">Title</label>
            <input type="text" name="title" class="form-control" id="title" placeholder="Title..." required>
            <label for="snippet" class="form-label">Snippet</label>
            <input type="text" name="snippet" class="form-control" id="snippet" placeholder="Snippet..." required>
            <label for="body" class="form-label">Body</label>
            <textarea name="body" class="form-control" id="body" rows="5" required></textarea>
        </div>
        <div class="modal-footer">
          <button type="submit" href="" class="waves-effect waves-green btn-flat" id="modalSubmit">Submit</button>
          <button type="button" href="" class="modal-close waves-effect waves-green btn-flat "
            id="modalClose">Close</button>
        </div>
        </form>
      </div>
  </div>
  </section>

  <section>
    <!-- Modal Update Structure -->
    <div id="modal2" class="modal">
      <div class="modal-content">
        <h4>Update Blog </h4>
        <form action="" ectype="multipart/form-data">
          <label for="title" class="form-label">Title</label>
          <input type="text" name="title" class="form-control" id="title" placeholder="Title..." required>
          <label for="snippet" class="form-label">Snippet</label>
          <input type="text" name="snippet" class="form-control" id="snippet" placeholder="Snippet..." required>
          <label for="body" class="form-label">Body</label>
          <textarea name="body" class="form-control" id="body" rows="5" required></textarea>
      </div>
      <div class="modal-footer">
        <button type="submit" href="" class="waves-effect waves-green btn-flat" id="modalSubmit">Update</button>
        <button type="button" href="" class="modal-close waves-effect waves-green btn-flat"
          id="modalClose">Close</button>
      </div>
    </div>
    </form>
    </div>

  </section>

  <%- include('./partials/footer') %>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>

<script src="dashboard.js"></script>

</html>